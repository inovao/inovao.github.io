(function(e){var t="openerActiveClass",n="left",r="doCollapseAll",i="position",s="trigger",o="disableSelection_dropotron",u="addClass",a="doCollapse",f=!1,l="outerWidth",c="removeClass",h="preventDefault",p="dropotron",d="clearTimeout",v="length",m="right",g="speed",y=!0,b="parent",w="none",E="stopPropagation",S=":visible",x="absolute",T="click",N="doExpand",C="css",k="center",L="toggle",A="baseZIndex",O="offsetX",M="alignment",_="children",D="submenuClassPrefix",P="doToggle",H="hover",B="ul",j="relative",F="opacity",I="z-index",q="opener",R="find",U="px",z=null,W="fadeTo",X="offset";e.fn[o]=function(){return e(this)[C]("user-select",w)[C]("-khtml-user-select",w)[C]("-moz-user-select",w)[C]("-o-user-select",w)[C]("-webkit-user-select",w)},e.fn[p]=function(t){var n;if(this[v]>1)for(n=0;n<this[v];n++)e(this[n])[p](t);return e[p](e.extend({selectorParent:e(this)},t))},e[p]=function(w){var V=e.extend({selectorParent:z,baseZIndex:1e3,menuClass:p,expandMode:H,hoverDelay:150,hideDelay:250,openerClass:q,openerActiveClass:"active",submenuClassPrefix:"level-",mode:"fade",speed:"fast",easing:"swing",alignment:n,offsetX:0,offsetY:0,globalOffsetY:0,IEOffsetX:0,IEOffsetY:0,noOpenerFade:y,detach:y,cloneOnDetach:y},w),$=V.selectorParent,J=$[R](B),K=e("body"),Q=e(window),G=f,Y=z,Z=z;$.on(r,function(){J[s](a)}),J.each(function(){var r=e(this),p=r[b]();V.hideDelay>0&&r.add(p).on("mouseleave",function(){window[d](Z),Z=window.setTimeout(function(){r[s](a)},V.hideDelay)}),r[o]().hide()[u](V.menuClass)[C](i,x).on("mouseenter",function(){window[d](Z)}).on(N,function(){var o,h,v,w,E,T,N,_,D,P,H;if(r.is(S))return f;window[d](Z),J.each(function(){var t=e(this);e.contains(t.get(0),p.get(0))||t[s](a)}),o=p[X](),h=p[i](),v=p[b]()[i](),w=p[l](),E=r[l](),T=r[C](I)==V[A];if(T){V.detach?N=o:N=h,P=N.top+p.outerHeight()+V.globalOffsetY,_=V[M],r[c](n)[c](m)[c](k);switch(V[M]){case m:D=N[n]-E+w,D<0&&(D=N[n],_=n);break;case k:D=N[n]-Math.floor((E-w)/2),D<0?(D=N[n],_=n):D+E>Q.width()&&(D=N[n]-E+w,_=m);break;case n:default:D=N[n],D+E>Q.width()&&(D=N[n]-E+w,_=m)}r[u](_)}else{p[C](i)==j||p[C](i)==x?(P=V.offsetY,D=-1*h[n]):(P=h.top+V.offsetY,D=0);switch(V[M]){case m:D+=-1*p[b]()[l]()+V[O];break;case k:case n:default:D+=p[b]()[l]()+V[O]}}navigator.userAgent.match(/MSIE ([0-9]+)\./)&&RegExp.$1<8&&(D+=V.IEOffsetX,P+=V.IEOffsetY),r[C](n,D+U)[C]("top",P+U),r[C](F,"0.01").show(),H=f,p[C](i)==j||p[C](i)==x?D=-1*h[n]:D=0,r[X]()[n]<0?(D+=p[b]()[l]()-V[O],H=y):r[X]()[n]+E>Q.width()&&(D+=-1*p[b]()[l]()-V[O],H=y),H&&r[C](n,D+U),r.hide()[C](F,"1");switch(V.mode){case"zoom":G=y,p[u](V[t]),r.animate({width:L,height:L},V[g],V.easing,function(){G=f});break;case"slide":G=y,p[u](V[t]),r.animate({height:L},V[g],V.easing,function(){G=f});break;case"fade":G=y,T&&!V.noOpenerFade?(V[g]=="slow"?H=80:V[g]=="fast"?H=40:H=Math.floor(V[g]/2),p[W](H,.01,function(){p[u](V[t]),p[W](V[g],1),r.fadeIn(V[g],function(){G=f})})):(p[u](V[t]),p[W](V[g],1),r.fadeIn(V[g],function(){G=f}));break;case"instant":default:p[u](V[t]),r.show()}return f}).on(a,function(){return r.is(S)?(r.hide(),p[c](V[t]),r[R]("."+V[t])[c](V[t]),r[R](B).hide(),f):f}).on(P,function(){return r.is(S)?r[s](a):r[s](N),f}),p[o]()[u](q)[C]("cursor","pointer").on(T,function(e){if(G)return;e[h](),e[E](),r[s](P)}),V.expandMode==H&&p[H](function(){if(G)return;Y=window.setTimeout(function(){r[s](N)},V.hoverDelay)},function(){window[d](Y)})}),J[R]("a")[C]("display","block").on(T,function(t){if(G)return;e(this).attr("href")[v]<1&&t[h]()}),$[R]("li")[C]("white-space","nowrap").each(function(){var t=e(this),n=t[_]("a"),i=t[_](B);n.on(T,function(t){e(this).attr("href")[v]<1?t[h]():t[E]()}),n[v]>0&&i[v]==0&&t.on(T,function(e){if(G)return;$[s](r),e[E]()})}),$[_]("li").each(function(){var t,n,r,i,s=e(this),o=s[_](B);if(o[v]>0){V.detach&&(V.cloneOnDetach&&(t=o.clone(),t.attr("class","").hide().appendTo(o[b]())),o.detach().appendTo(K));for(n=V[A],r=1,i=o;i[v]>0;r++)i[C](I,n++),V[D]&&i[u](V[D]+(n-1-V[A])),i=i[R]("> li > ul")}}),Q.on("scroll",function(){$[s](r)}).on("keypress",function(e){!G&&e.keyCode==27&&(e[h](),$[s](r))}),K.on(T,function(){G||$[s](r)})}})(jQuery)